# ZkSpy
ZkSpy is an application for Windows or Linux which allows spying on the communication between a client application and a timeclock with ZKTeco firmware. At present it only supports communication over TCP. If your client application uses UDP it is still useful as an investigative tool because the TCP datagrams differ from their UDP counterparts by a leading 4 byte marker (0x50, 0x50, 0x82, 0x7D) and a 4 byte little endian field which contains the length of the message to follow (that is to say not including the marker or length field itself).

Note that as best as I can tell the datagrams used to communicate with a clock over a serial interface (RS-232/485) are different from the datagrams used in both the TCP and UDP cases. If anyone knows what purpose is served by the "extra" bytes I'd appeciate the information.

It spys on the communication between the clock and the application by inserting itself as a "man in the middle". In other words, the Spy is configured with the IP address and port of the clock on which to spy and the application is configured to direct its traffic to the ZkSpy. ZkSpy logs the bytes received from either application or clock and forwards them to the counterparty. This is more intrusive than using Wireshark but much less painful to pull off. :-)
